<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>我是_一棵树_</title>
  <subtitle>记录，分享，回忆</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wsyks.github.io/"/>
  <updated>2016-04-07T13:10:23.558Z</updated>
  <id>http://wsyks.github.io/</id>
  
  <author>
    <name>我是_一棵树_</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>php mongodb操作笔记</title>
    <link href="http://wsyks.github.io/2016/04/06/php-mongodb%E6%93%8D%E4%BD%9C%E7%AC%94%E8%AE%B0/"/>
    <id>http://wsyks.github.io/2016/04/06/php-mongodb操作笔记/</id>
    <published>2016-04-06T14:43:41.000Z</published>
    <updated>2016-04-07T13:10:23.558Z</updated>
    
    <content type="html">&lt;h1 id=&quot;0X00-前言&quot;&gt;&lt;a href=&quot;#0X00-前言&quot; class=&quot;headerlink&quot; title=&quot;0X00 前言&quot;&gt;&lt;/a&gt;0X00 前言&lt;/h1&gt;&lt;p&gt; 最近一段时间，有两个项目都需要用到php操作mongodb，操作比较频繁，记录一下操作用用到的一些方法。&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&quot;0X01-操作语法&quot;&gt;&lt;a href=&quot;#0X01-操作语法&quot; class=&quot;headerlink&quot; title=&quot;0X01 操作语法&quot;&gt;&lt;/a&gt;0X01 操作语法&lt;/h1&gt;&lt;h2 id=&quot;一、连接&quot;&gt;&lt;a href=&quot;#一、连接&quot; class=&quot;headerlink&quot; title=&quot;一、连接&quot;&gt;&lt;/a&gt;一、连接&lt;/h2&gt;&lt;h3 id=&quot;1、基础连接&quot;&gt;&lt;a href=&quot;#1、基础连接&quot; class=&quot;headerlink&quot; title=&quot;1、基础连接&quot;&gt;&lt;/a&gt;1、基础连接&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoClient(); &lt;span class=&quot;comment&quot;&gt;#默认本地的连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;db;           &lt;span class=&quot;comment&quot;&gt;#选择名为db的数据库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;selectDB(&lt;span class=&quot;string&quot;&gt;&quot;mydb&quot;&lt;/span&gt;);                  &lt;span class=&quot;comment&quot;&gt;#第二种写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;collection &lt;span class=&quot;comment&quot;&gt;#选择一个数据库表（集合）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;selectCollection(&lt;span class=&quot;string&quot;&gt;&#39;column&#39;&lt;/span&gt;);  &lt;span class=&quot;comment&quot;&gt;#第二种写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;mydb-&amp;gt;column;              &lt;span class=&quot;comment&quot;&gt;#更简洁的写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;【注：】&lt;/p&gt;
&lt;h3 id=&quot;2、连接&quot;&gt;&lt;a href=&quot;#2、连接&quot; class=&quot;headerlink&quot; title=&quot;2、连接&quot;&gt;&lt;/a&gt;2、连接&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;格式：&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoClient(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://用户名:密码@地址:端口/默认指定数据库&quot;&lt;/span&gt;,参数)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoClient(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://localhost&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoClient(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://localhost:27017&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoClient(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://localhost:$port&quot;&lt;/span&gt;);  &lt;span class=&quot;comment&quot;&gt;#mongo对应端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Mongo(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://localhost&quot;&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;replicaSet&quot;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;)); &lt;span class=&quot;comment&quot;&gt;#负载均衡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Mongo(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://localhost&quot;&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;persist&quot;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&quot;t&quot;&lt;/span&gt;));     &lt;span class=&quot;comment&quot;&gt;#持久连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Mongo(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://sa:123@localhost&quot;&lt;/span&gt;);    &lt;span class=&quot;comment&quot;&gt;#带用户名密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Mongo(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://localhost:27017,localhost:27018&quot;&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;#连接多个服务器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Mongo(&lt;span class=&quot;string&quot;&gt;&quot;mongodb:///tmp/mongo-27017.sock&quot;&lt;/span&gt;);   &lt;span class=&quot;comment&quot;&gt;#域套接字&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Mongo(&lt;span class=&quot;string&quot;&gt;&quot;mongodb://admin:admin@localhost:27017/test&quot;&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;persist&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;p&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;replicaSet&quot;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;));   &lt;span class=&quot;comment&quot;&gt;#完整&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;【注：】由于我的php版本是5.4类型，mongodb是3.0.7版本，好像由于php版本太低，导致和mongdb有些不兼容，连接带有用户名密码的服务器时会报错，目前这个问题还没得到解决，只能先不加认证。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;二、查询&quot;&gt;&lt;a href=&quot;#二、查询&quot; class=&quot;headerlink&quot; title=&quot;二、查询&quot;&gt;&lt;/a&gt;二、查询&lt;/h2&gt;&lt;h3 id=&quot;1、基础查询&quot;&gt;&lt;a href=&quot;#1、基础查询&quot; class=&quot;headerlink&quot; title=&quot;1、基础查询&quot;&gt;&lt;/a&gt;1、基础查询&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;port&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;ip&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;192.168.1.1&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;port&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;$gt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;$lt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;5555&lt;/span&gt;)));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$cursor&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;findOne();&lt;span class=&quot;comment&quot;&gt;#查询一条结果&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;【注：】
1、$gt为大于、$gte为大于等于、$lt为小于、$lte为小于等于、$ne为不等于、$exists不存在；
2、findOne()获得结果集后不能使用snapshot(),fields()等函数;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;2、处理查询&quot;&gt;&lt;a href=&quot;#2、处理查询&quot; class=&quot;headerlink&quot; title=&quot;2、处理查询&quot;&gt;&lt;/a&gt;2、处理查询&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;port&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;))-&amp;gt;sort(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;timestamp&#39;&lt;/span&gt;=&amp;gt;-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)); &lt;span class=&quot;comment&quot;&gt;#sort排序，-1表示降序，1表示升序 ,参数的先后影响排序&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;port&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;))-&amp;gt;skip(n);&lt;span class=&quot;comment&quot;&gt;#跳过n条数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;port&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;))-&amp;gt;limit(n);&lt;span class=&quot;comment&quot;&gt;#获得n条数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find()-&amp;gt;fields(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(“user”=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;));&lt;span class=&quot;comment&quot;&gt;#只显示user 列&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find()-&amp;gt;fields(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(“user”=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;));&lt;span class=&quot;comment&quot;&gt;#只不显示user 列&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;/*使用.号来查询子嵌套文档 */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name : &lt;span class=&quot;string&quot;&gt;&quot;Gordon Freeman&quot;&lt;/span&gt;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    address : &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        city : &lt;span class=&quot;string&quot;&gt;&quot;Springfield&quot;&lt;/span&gt;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        state : &lt;span class=&quot;string&quot;&gt;&quot;Florida&quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;address.city&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;Springfield&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;h2 id=&quot;三、获取数量&quot;&gt;&lt;a href=&quot;#三、获取数量&quot; class=&quot;headerlink&quot; title=&quot;三、获取数量&quot;&gt;&lt;/a&gt;三、获取数量&lt;/h2&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$count&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;count();&lt;span class=&quot;comment&quot;&gt;//得到总数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$count&lt;/span&gt; =&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;variable&quot;&gt;$select_query&lt;/span&gt;)-&amp;gt;count();&lt;span class=&quot;comment&quot;&gt;//筛选后总数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;或者：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$count&lt;/span&gt; =&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;count(&lt;span class=&quot;variable&quot;&gt;$select_query&lt;/span&gt;)；&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;h2 id=&quot;四、针对mongodb的一些格式&quot;&gt;&lt;a href=&quot;#四、针对mongodb的一些格式&quot; class=&quot;headerlink&quot; title=&quot;四、针对mongodb的一些格式&quot;&gt;&lt;/a&gt;四、针对mongodb的一些格式&lt;/h2&gt;&lt;h3 id=&quot;1、日期&quot;&gt;&lt;a href=&quot;#1、日期&quot; class=&quot;headerlink&quot; title=&quot;1、日期&quot;&gt;&lt;/a&gt;1、日期&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   MongoDate类型格式如下：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   [timestamp] =&amp;gt; MongoDate Object&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [sec] =&amp;gt; &lt;span class=&quot;number&quot;&gt;1379495520&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;#表当前时间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [usec] =&amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;          &lt;span class=&quot;comment&quot;&gt;#时间精确到微秒 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;variable&quot;&gt;$timestamp&lt;/span&gt; = date(&lt;span class=&quot;string&quot;&gt;&quot;Y-m-d H:i&quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$start&lt;/span&gt;-&amp;gt;sec); &lt;span class=&quot;comment&quot;&gt;#print 2016-4-7 16:00&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;/*查询某个时间段内的数据*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;variable&quot;&gt;$start&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoDate(&lt;span class=&quot;variable&quot;&gt;$startRaw&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;#创建MongoDate类型，$startRaw可为时间戳类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   如：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;variable&quot;&gt;$start&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoDate(strtotime(&lt;span class=&quot;string&quot;&gt;&#39;2016-4-7 12:00:00&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$end&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoDate(strtotime(&lt;span class=&quot;string&quot;&gt;&#39;2016-4-8 12:00:00&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;variable&quot;&gt;$time&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;timestamp&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;$gt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;variable&quot;&gt;$start&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;$lte&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;variable&quot;&gt;$end&lt;/span&gt;))) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;/*查询一星期内的数据*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;variable&quot;&gt;$lastweek&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoDate(strtotime(&lt;span class=&quot;string&quot;&gt;&#39;-1 week&#39;&lt;/span&gt;));   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;-&amp;gt;find(&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;timestamp&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;$gt&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;variable&quot;&gt;$lastweek&lt;/span&gt;)));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2、id&quot;&gt;&lt;a href=&quot;#2、id&quot; class=&quot;headerlink&quot; title=&quot;2、id&quot;&gt;&lt;/a&gt;2、id&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*使用下面的方法来匹配&amp;#123;&quot;_id&quot;:ObjectId(&quot;56df8bbed7bc8d047cc7dfa7&quot;)&amp;#125;,查询、更新也一样&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$id = new MongoId(&quot;56df8bbed7bc8d047cc7dfa7&quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$data = $collection-&amp;gt;find(array(&#39;_id&#39;=&amp;gt;(object)$id));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;或者&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$data = $collection-&amp;gt;find(array(&#39;_id&#39;=&amp;gt;$id));&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;未完待续。。。。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;0X00-前言&quot;&gt;&lt;a href=&quot;#0X00-前言&quot; class=&quot;headerlink&quot; title=&quot;0X00 前言&quot;&gt;&lt;/a&gt;0X00 前言&lt;/h1&gt;&lt;p&gt; 最近一段时间，有两个项目都需要用到php操作mongodb，操作比较频繁，记录一下操作用用到的一些方法。&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&quot;0X01-操作语法&quot;&gt;&lt;a href=&quot;#0X01-操作语法&quot; class=&quot;headerlink&quot; title=&quot;0X01 操作语法&quot;&gt;&lt;/a&gt;0X01 操作语法&lt;/h1&gt;&lt;h2 id=&quot;一、连接&quot;&gt;&lt;a href=&quot;#一、连接&quot; class=&quot;headerlink&quot; title=&quot;一、连接&quot;&gt;&lt;/a&gt;一、连接&lt;/h2&gt;&lt;h3 id=&quot;1、基础连接&quot;&gt;&lt;a href=&quot;#1、基础连接&quot; class=&quot;headerlink&quot; title=&quot;1、基础连接&quot;&gt;&lt;/a&gt;1、基础连接&lt;/h3&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MongoClient(); &lt;span class=&quot;comment&quot;&gt;#默认本地的连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;db;           &lt;span class=&quot;comment&quot;&gt;#选择名为db的数据库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;selectDB(&lt;span class=&quot;string&quot;&gt;&quot;mydb&quot;&lt;/span&gt;);                  &lt;span class=&quot;comment&quot;&gt;#第二种写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt; = &lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;collection &lt;span class=&quot;comment&quot;&gt;#选择一个数据库表（集合）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;selectCollection(&lt;span class=&quot;string&quot;&gt;&#39;column&#39;&lt;/span&gt;);  &lt;span class=&quot;comment&quot;&gt;#第二种写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$collection&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;mydb-&amp;gt;column;              &lt;span class=&quot;comment&quot;&gt;#更简洁的写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="mongodb" scheme="http://wsyks.github.io/tags/mongodb/"/>
    
      <category term="php" scheme="http://wsyks.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>php mongodb扩展安装</title>
    <link href="http://wsyks.github.io/2016/04/06/php-mongodb%E6%89%A9%E5%B1%95%E5%AE%89%E8%A3%85/"/>
    <id>http://wsyks.github.io/2016/04/06/php-mongodb扩展安装/</id>
    <published>2016-04-06T14:03:35.000Z</published>
    <updated>2016-04-06T14:35:57.349Z</updated>
    
    <content type="html">&lt;h1 id=&quot;0X00-前言&quot;&gt;&lt;a href=&quot;#0X00-前言&quot; class=&quot;headerlink&quot; title=&quot;0X00 前言&quot;&gt;&lt;/a&gt;0X00 前言&lt;/h1&gt;&lt;p&gt;由于项目中需要运用mongodb数据库，所以需要安装一下该扩展，在安装过程中有一些坑，故写一下安装流程以及该注意的一些东西。&lt;/p&gt;
&lt;h1 id=&quot;0X01-安装前&quot;&gt;&lt;a href=&quot;#0X01-安装前&quot; class=&quot;headerlink&quot; title=&quot;0X01 安装前&quot;&gt;&lt;/a&gt;0X01 安装前&lt;/h1&gt;&lt;p&gt;首先安装扩展前，你需要安装mongodb，这里不赘述，然后你需要知道自己的php是什么样型号，笔者用的是wamp集成的环境，可以通过点击localhost-》phpinfo()中查看，笔者php情况如图，版本为5.4.3，64位，vc9。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;img src=&quot;http://7xsgg1.com1.z0.glb.clouddn.com/1-1.png&quot; alt=&quot;php信息&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;0X02-下载安装&quot;&gt;&lt;a href=&quot;#0X02-下载安装&quot; class=&quot;headerlink&quot; title=&quot;0X02 下载安装&quot;&gt;&lt;/a&gt;0X02 下载安装&lt;/h1&gt;&lt;h3 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h3&gt;&lt;p&gt;知道了自己php的相关信息后，可以去&lt;a href=&quot;http://pecl.php.net/package/mongo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网&lt;/a&gt;站下载合适的mongodb扩展文件。&lt;br&gt;【注意】：根据的php版本下载对应的版本，以及选择正确x64还是x86，笔者当时看到php5.4的只有x86版本，心里吐了一口老血，什么鬼，竟然没有，在网上找了半天，终于找到合适的。分享给大家。【&lt;a href=&quot;http://download.csdn.net/detail/tiger520119/6204383#comment&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击这里&lt;/a&gt;】&lt;/p&gt;
&lt;h3 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h3&gt;&lt;p&gt;下载完你需要的二进制包后，解压压缩包，将’php_mongo.dll’文件（下载过来的文件由于版本，可能名字有些不同，可以统一改成如上）添加到你的PHP扩展目录中（ext）。ext目录通常在PHP安装目录下的ext目录。&lt;br&gt;打开php配置文件 php.ini 添加以下配置：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;extension=php_mongo.dll //注意不要在前面加“#”号
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;【注意】：由于笔者用的wamp，点开wamp，也可以进入到php.ini文件，但是通过wamp编辑该文件最终是不会生效的，所以应该到wamp安装目录下，找到bin-》php-》php.ini，两个文件都应该更改后才行。&lt;/p&gt;
&lt;p&gt;修改好后，重启服务器。通过浏览器访问phpinfo，如果安装成功，就会看到类型以下的信息：&lt;br&gt;&lt;img src=&quot;http://7xsgg1.com1.z0.glb.clouddn.com/2.png&quot; alt=&quot;安装成功&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;0X00-前言&quot;&gt;&lt;a href=&quot;#0X00-前言&quot; class=&quot;headerlink&quot; title=&quot;0X00 前言&quot;&gt;&lt;/a&gt;0X00 前言&lt;/h1&gt;&lt;p&gt;由于项目中需要运用mongodb数据库，所以需要安装一下该扩展，在安装过程中有一些坑，故写一下安装流程以及该注意的一些东西。&lt;/p&gt;
&lt;h1 id=&quot;0X01-安装前&quot;&gt;&lt;a href=&quot;#0X01-安装前&quot; class=&quot;headerlink&quot; title=&quot;0X01 安装前&quot;&gt;&lt;/a&gt;0X01 安装前&lt;/h1&gt;&lt;p&gt;首先安装扩展前，你需要安装mongodb，这里不赘述，然后你需要知道自己的php是什么样型号，笔者用的是wamp集成的环境，可以通过点击localhost-》phpinfo()中查看，笔者php情况如图，版本为5.4.3，64位，vc9。&lt;br&gt;
    
    </summary>
    
    
      <category term="mongodb" scheme="http://wsyks.github.io/tags/mongodb/"/>
    
      <category term="php" scheme="http://wsyks.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>hexo博客搭建</title>
    <link href="http://wsyks.github.io/2016/03/30/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <id>http://wsyks.github.io/2016/03/30/hexo博客搭建/</id>
    <published>2016-03-30T14:08:38.000Z</published>
    <updated>2016-04-06T14:37:28.055Z</updated>
    
    <content type="html">&lt;h1 id=&quot;0X00-Hexo简介&quot;&gt;&lt;a href=&quot;#0X00-Hexo简介&quot; class=&quot;headerlink&quot; title=&quot;0X00 Hexo简介&quot;&gt;&lt;/a&gt;0X00 Hexo简介&lt;/h1&gt;&lt;p&gt;hexo是一个基于Node.js的静态博客程序，可以方便的生成静态网页托管在github和Heroku上。。&lt;/p&gt;
&lt;h1 id=&quot;0X01-部署过程&quot;&gt;&lt;a href=&quot;#0X01-部署过程&quot; class=&quot;headerlink&quot; title=&quot;0X01 部署过程&quot;&gt;&lt;/a&gt;0X01 部署过程&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;Git安装和Github设置&lt;/li&gt;
&lt;li&gt;Node.js安装&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hexo安装与设置&lt;br&gt;Node, npm和Git都安装成功, 开始安装hexo&lt;/p&gt;
&lt;p&gt;安装命令：&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo -g  #-g表示全局安装, npm默认为当前项目安装
hexo init            #执行init命令初始化hexo到你指定的目录
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;     
&lt;p&gt;  再执行以下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo generate       #自动根据当前目录下文件,生成静态网页
hexo server         #运行本地服务
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;浏览器输入&lt;a href=&quot;http://localhost:4000就可以看到效果。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:4000就可以看到效果。&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;打开_config.yml,找到deploy一栏，修改如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;deploy:
  type: git
  repository: https://github.com/你的github名/你的github名.github.io.git
  branch: master
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;再执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo deploy  #部署到远程
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后就可以使用Github用户名.github.io进行访问&lt;/p&gt;
&lt;h1 id=&quot;0X02-添加博文&quot;&gt;&lt;a href=&quot;#0X02-添加博文&quot; class=&quot;headerlink&quot; title=&quot;0X02 添加博文&quot;&gt;&lt;/a&gt;0X02 添加博文&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;hexo new &amp;quot;postName&amp;quot;  #新建博文,其中postName是博文题目
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;【注】文件自动生成格式:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;title: &amp;quot;first&amp;quot;  #博文题目
date: 2016-3-30 21:25:38  #生成时间
tags: Paper     #标签, 多个标签使用格式[Paper1, Paper2,Paper3,...]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;【注】这里title，date，tags冒号后一定要有一个空格，才能写具体的内容，否则会报错。&lt;/p&gt;
&lt;p&gt;如果不想博文在首页全部显示, 并能出现阅读全文按钮效果, 需要在你想在首页显示的部分下添加“&lt;code&gt;&amp;lt;!--more--&amp;gt;&lt;/code&gt;”，此处及以上的内容会在首页显示。“&lt;code&gt;&amp;lt;!--more--&amp;gt;&lt;/code&gt;” 以下是在首页隐藏的部分。&lt;/p&gt;
&lt;p&gt;写好文章后，执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo g       #hexo generate简写
hexo s       #hexo server简写
hexo deploy  #部署到远程
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;0X03-主题更改&quot;&gt;&lt;a href=&quot;#0X03-主题更改&quot; class=&quot;headerlink&quot; title=&quot;0X03 主题更改&quot;&gt;&lt;/a&gt;0X03 主题更改&lt;/h1&gt;&lt;p&gt;Hexo提供了官网的主题, 初始化hexo时也会自动生成一个主题, Hexo还支持个性定制主题, 可以根据自己的喜好对&lt;a href=&quot;https://github.com/hexojs/hexo/wiki/Themes&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;主题&lt;/a&gt;进行修改, &lt;/p&gt;
&lt;p&gt;我这里采用的yilia这个主题，如果你想使用这个主题，直接clone&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia

并修改hexo根目录下的 _config.yml ： theme: yilia
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里要说的，笔者在该头像时入坑了一下，在主题根目录下的_config.yml 文件中&lt;br&gt;    其中 avatar: 可以选择头像路径。&lt;/p&gt;
&lt;p&gt;这里笔者一开始选择本地的图片，发现首页头像可以设置成功，但是点击到具体文章里头像便没了，后来发现是头像路径的问题，故后来直接使用网络图片，采用网络路径，以免每次文章中都要设置头像。&lt;/p&gt;
&lt;p&gt;大家想要在文章里使用图片时，也可以使用七牛，将图片上传到他的云服务器，这样它会给你产生一个url链接，比较方便&lt;/p&gt;
&lt;p&gt;酱，先写到这里。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;0X00-Hexo简介&quot;&gt;&lt;a href=&quot;#0X00-Hexo简介&quot; class=&quot;headerlink&quot; title=&quot;0X00 Hexo简介&quot;&gt;&lt;/a&gt;0X00 Hexo简介&lt;/h1&gt;&lt;p&gt;hexo是一个基于Node.js的静态博客程序，可以方便的生成静态网页托管在github和Heroku上。。&lt;/p&gt;
&lt;h1 id=&quot;0X01-部署过程&quot;&gt;&lt;a href=&quot;#0X01-部署过程&quot; class=&quot;headerlink&quot; title=&quot;0X01 部署过程&quot;&gt;&lt;/a&gt;0X01 部署过程&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;Git安装和Github设置&lt;/li&gt;
&lt;li&gt;Node.js安装&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hexo安装与设置&lt;br&gt;Node, npm和Git都安装成功, 开始安装hexo&lt;/p&gt;
&lt;p&gt;安装命令：&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo -g  #-g表示全局安装, npm默认为当前项目安装
hexo init            #执行init命令初始化hexo到你指定的目录
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://wsyks.github.io/tags/hexo/"/>
    
      <category term="博客" scheme="http://wsyks.github.io/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>PHP学习——登录验证（第一级）</title>
    <link href="http://wsyks.github.io/2016/03/01/PHP%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%EF%BC%88%E7%AC%AC%E4%B8%80%E7%BA%A7%EF%BC%89/"/>
    <id>http://wsyks.github.io/2016/03/01/PHP学习——登录验证（第一级）/</id>
    <published>2016-03-01T13:39:31.000Z</published>
    <updated>2016-03-30T14:16:43.251Z</updated>
    
    <content type="html">&lt;h1 id=&quot;0x00-前言&quot;&gt;&lt;a href=&quot;#0x00-前言&quot; class=&quot;headerlink&quot; title=&quot;0x00 前言&quot;&gt;&lt;/a&gt;0x00 前言&lt;/h1&gt;&lt;p&gt;最近一段时间在学php，昨天和今天又在W3C上快速的过了一遍HTML,CSS，有些东西总是记不住，然后之前又快速的过了一边php，打算写一个登录验证的小代码练练手，也记录一下过程中新学习到的一些知识点，一级级往上升。&lt;/p&gt;
&lt;h1 id=&quot;0X01-代码结构&quot;&gt;&lt;a href=&quot;#0X01-代码结构&quot; class=&quot;headerlink&quot; title=&quot;0X01 代码结构&quot;&gt;&lt;/a&gt;0X01 代码结构&lt;/h1&gt;&lt;p&gt;话不多说，上代码先~~~&lt;/p&gt;
&lt;h3 id=&quot;1、代码目录结构&quot;&gt;&lt;a href=&quot;#1、代码目录结构&quot; class=&quot;headerlink&quot; title=&quot;1、代码目录结构&quot;&gt;&lt;/a&gt;1、代码目录结构&lt;/h3&gt;&lt;p&gt;在同一个目录下三个文件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;index.html//登录页面
login_auth.php//验证页面
index.php//登录成功页面
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;2、数据库结构：&quot;&gt;&lt;a href=&quot;#2、数据库结构：&quot; class=&quot;headerlink&quot; title=&quot;2、数据库结构：&quot;&gt;&lt;/a&gt;2、数据库结构：&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;user:数据库
  =》username表
    =&amp;gt;username 字段名
    =&amp;gt;password 字段名
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;3、具体代码&quot;&gt;&lt;a href=&quot;#3、具体代码&quot; class=&quot;headerlink&quot; title=&quot;3、具体代码&quot;&gt;&lt;/a&gt;3、具体代码&lt;/h3&gt;&lt;p&gt;3.1、index.html代码&lt;/p&gt;
&lt;p&gt;该页面代码如下，比较简单，我就不多说啦。&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;doctype&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;lang&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;en&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;charset&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;login&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;css&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;rules&quot;&gt;&amp;#123;&lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;text-align&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; center&lt;/span&gt;&lt;/span&gt;;&lt;span class=&quot;rule&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;position&lt;/span&gt;:&lt;span class=&quot;value&quot;&gt; relative&lt;/span&gt;&lt;/span&gt;;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;login&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;login_auth.php&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;post&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            username:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;user&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            password:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;password&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;pwd&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;登录&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;点击登录后，会触发表单动作，跳转到login_auth.php页面认证&lt;/p&gt;
&lt;p&gt;3.2、login_auth.php：&lt;br&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    header(&lt;span class=&quot;string&quot;&gt;&quot;Content-Type: text/html;charset=utf-8&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable&quot;&gt;$username&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$_POST&lt;/span&gt;[&lt;span class=&quot;string&quot;&gt;&#39;user&#39;&lt;/span&gt;]; &lt;span class=&quot;comment&quot;&gt;//$_POST 变量是一个数组，内容是由 HTTPPOST方法发送的变量名称和值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable&quot;&gt;$password&lt;/span&gt;=&lt;span class=&quot;variable&quot;&gt;$_POST&lt;/span&gt;[&lt;span class=&quot;string&quot;&gt;&#39;pwd&#39;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;variable&quot;&gt;$username&lt;/span&gt;==&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;请输入用户名&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;a href=&#39;index.html&#39;&amp;gt;返回&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;elseif&lt;/span&gt;(&lt;span class=&quot;variable&quot;&gt;$password&lt;/span&gt;==&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt;  &lt;span class=&quot;string&quot;&gt;&quot;请输入密码&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;a href=&#39;index.html&#39;&amp;gt;返回&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable&quot;&gt;$link&lt;/span&gt;=mysql_connect(&lt;span class=&quot;string&quot;&gt;&quot;localhost&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;root&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;)&lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;die&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;不能连接数据库&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mysql_select_db(&lt;span class=&quot;string&quot;&gt;&quot;user&quot;&lt;/span&gt;,&lt;span class=&quot;variable&quot;&gt;$link&lt;/span&gt;)&lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;die&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;选择错误&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable&quot;&gt;$sql&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;select * from username where username=&#39;$username&#39; AND password=&#39;$password&#39;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable&quot;&gt;$result&lt;/span&gt;=mysql_query(&lt;span class=&quot;variable&quot;&gt;$sql&lt;/span&gt;,&lt;span class=&quot;variable&quot;&gt;$link&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable&quot;&gt;$news&lt;/span&gt;=mysql_fetch_assoc(&lt;span class=&quot;variable&quot;&gt;$result&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mysql_free_result(&lt;span class=&quot;variable&quot;&gt;$result&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;variable&quot;&gt;$news&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;登陆成功&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;a href=&#39;index.php&#39;&amp;gt;登陆&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;密码错误或用户名不正确&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;a href=&#39;index.html&#39;&amp;gt;返回&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由于页面中有中文，为防止乱码，需要在头部增加一句：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;header(&amp;quot;Content-Type: text/html;charset=utf-8&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;0X02-相关函数&quot;&gt;&lt;a href=&quot;#0X02-相关函数&quot; class=&quot;headerlink&quot; title=&quot;0X02 相关函数&quot;&gt;&lt;/a&gt;0X02 相关函数&lt;/h1&gt;&lt;p&gt;以上用了一个php中与mysql数据库有关的函数&lt;br&gt;1、mysql_connect:连接一个数据库&lt;br&gt;语法：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql_connect(servername,username,password);
servername  可选。规定要连接的服务器。默认是 &amp;quot;localhost:3306&amp;quot;。
username    可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。
password    可选。规定登录所用的密码。默认是 &amp;quot;&amp;quot;。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2、mysql_select_db:选择数据库&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql_select_db(database,connection)
database    必需。规定要选择的数据库。
connection  可选。规定 MySQL 连接。如果未指定，则使用上一个连接。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果成功，则该函数返回 true。如果失败，则返回 false。&lt;br&gt;3、mysql_query:执行一条 MySQL 查询。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql_query(query,connection)
query 必需。规定要发送的 SQL 查询。注释：查询字符串不应以分号结束。
connection 可选。规定 SQL 连接标识符。如果未规定，则使用上一个打开的连接。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;4、mysql_fetch_assoc:从结果集中取得一行作为关联数组。返回根据从结果集取得的行生成的关联数组，如果没有更多行，则返回 false。如&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Array
(
[userame] =&amp;gt; admin
[password] =&amp;gt; 123456
)
 mysql_fetch_assoc(data)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5、mysql_free_result:释放结果内存。如果成功，则返回 true，如果失败，则返回 false。&lt;/p&gt;
&lt;p&gt;所以有了以上的代码啦~&lt;br&gt;还有，die() 函数输出一条消息，并退出当前脚本。该函数是 exit() 函数的别名。&lt;br&gt;这里特地在说一下 or这个语法：之所以 用 or 可以达到，当函数错误后，执行or后面的函数是因为:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;逻辑运算的运算顺序是从左向右&lt;/li&gt;
&lt;li&gt;or运算符的左结合性&lt;/li&gt;
&lt;li&gt;or运算中，如果运算时有值为真了，则整个表达式为真，后面不需要运算&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;终合上面三个因素，当or左侧函数运行正常(返回非假值)，则不会执行后面的函数。这里利用了or的这个特性，将die(终止并输出函数)用于此处，巧妙的实现了函数异常而报错的功能。 &lt;/p&gt;
&lt;p&gt;根据上面的分析，想到如果左侧函数就是返回假的函数，或者无返回值的函数，应该也是执行后面的函数mysql_connect()执行错误,并不是这个函数本身执行错误了,如果是它本身执行错误是PHP的系统错误，它仅仅是返回了一个假值而已。 &lt;/p&gt;
&lt;p&gt;那这是一个非常简陋的代码,时间不早啦，今天就先写到这，下一次介绍一下其中存在的一些隐患与改进的地方~~&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;0x00-前言&quot;&gt;&lt;a href=&quot;#0x00-前言&quot; class=&quot;headerlink&quot; title=&quot;0x00 前言&quot;&gt;&lt;/a&gt;0x00 前言&lt;/h1&gt;&lt;p&gt;最近一段时间在学php，昨天和今天又在W3C上快速的过了一遍HTML,CSS，有些东西总是记不住，然后之前又快速的过了一边php，打算写一个登录验证的小代码练练手，也记录一下过程中新学习到的一些知识点，一级级往上升。&lt;/p&gt;
&lt;h1 id=&quot;0X01-代码结构&quot;&gt;&lt;a href=&quot;#0X01-代码结构&quot; class=&quot;headerlink&quot; title=&quot;0X01 代码结构&quot;&gt;&lt;/a&gt;0X01 代码结构&lt;/h1&gt;&lt;p&gt;话不多说，上代码先~~~&lt;/p&gt;
&lt;h3 id=&quot;1、代码目录结构&quot;&gt;&lt;a href=&quot;#1、代码目录结构&quot; class=&quot;headerlink&quot; title=&quot;1、代码目录结构&quot;&gt;&lt;/a&gt;1、代码目录结构&lt;/h3&gt;&lt;p&gt;在同一个目录下三个文件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;index.html//登录页面
login_auth.php//验证页面
index.php//登录成功页面
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
      <category term="php" scheme="http://wsyks.github.io/tags/php/"/>
    
  </entry>
  
</feed>
